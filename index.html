<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcards Offline Ultimate</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div id="app">
        <header>
            <h1>Flashcards Ultimate</h1>
            <div class="top-controls">
                <input type="text" id="search-bar" placeholder="üîé T√¨m ki·∫øm th·∫ª, nh√≥m, tr·∫°ng th√°i...">
                <button id="theme-toggle-btn" class="header-btn" title="Ch·∫ø ƒë·ªô S√°ng/T·ªëi" aria-label="Chuy·ªÉn ch·∫ø ƒë·ªô s√°ng ho·∫∑c t·ªëi">‚òÄÔ∏è</button>
            </div>
             <div class="theme-selector-container">
                <select id="background-theme-selector" title="Ch·ªçn h√¨nh n·ªÅn" aria-label="Ch·ªçn h√¨nh n·ªÅn cho ·ª©ng d·ª•ng">
                    <option value="default">M·∫∑c ƒë·ªãnh</option>
                    <option value="black-cat">M√®o ƒêen</option>
                    <option value="coffee-shop">Qu√°n C√† Ph√™</option>
                </select>
            </div>
            <div class="deck-controls">
                <select id="deck-selector" title="Ch·ªçn b·ªô th·∫ª" aria-label="Ch·ªçn m·ªôt b·ªô th·∫ª ho·∫∑c nh√≥m th·∫ª ƒë·ªÉ h·ªçc"></select>
                <button id="add-deck-btn" class="header-btn" title="Th√™m b·ªô th·∫ª m·ªõi" aria-label="Th√™m b·ªô th·∫ª m·ªõi">‚ûï</button>
                <button id="edit-deck-btn" class="header-btn" title="ƒê·ªïi t√™n b·ªô th·∫ª hi·ªán t·∫°i" aria-label="Ch·ªânh s·ª≠a b·ªô th·∫ª hi·ªán t·∫°i">‚úèÔ∏è</button>
                <button id="delete-deck-btn" class="header-btn" title="X√≥a b·ªô th·∫ª hi·ªán t·∫°i" aria-label="X√≥a b·ªô th·∫ª hi·ªán t·∫°i">üóëÔ∏è</button>
                <button id="shuffle-btn" class="header-btn" title="X√°o tr·ªôn th·∫ª" aria-label="X√°o tr·ªôn th·ª© t·ª± th·∫ª">üîÄ</button>
                <button id="merge-decks-btn" class="header-btn" title="G·ªôp c√°c b·ªô th·∫ª" aria-label="G·ªôp nhi·ªÅu b·ªô th·∫ª th√†nh m·ªôt nh√≥m">‚ûï‚Äçü§ù‚Äç‚ûï</button>
    		    <button id="unmerge-deck-btn" class="header-btn" title="T√°ch/X√≥a nh√≥m n√†y" aria-label="X√≥a nh√≥m th·∫ª">‚ûñ</button>
            </div>
        </header>

        <main>
            <div id="progress-view">
                <h2 id="progress-deck-name"></h2>
                <div class="progress-stats">
                    <div class="stat-item"><span id="not-studied-count">0</span><p>Ch∆∞a h·ªçc</p></div>
                    <div class="stat-item"><span id="learning-count">0</span><p>ƒêang h·ªçc</p></div>
                    <div class="stat-item"><span id="mastered-count">0</span><p>Th√†nh th·∫°o</p></div>
                </div>
                 <div class="main-actions">
                    <button id="start-review-btn">B·∫Øt ƒë·∫ßu √¥n t·∫≠p</button>
                    <button id="review-starred-btn">√în th·∫ª quan tr·ªçng (‚≠êÔ∏è)</button>
                    <button id="manage-cards-btn" class="secondary-action-btn">Qu·∫£n l√Ω th·∫ª</button>
                    <button id="reset-deck-btn" class="secondary-action-btn danger">Reset ti·∫øn ƒë·ªô</button>
                </div>
                 <div class="data-management">
                    <button id="show-stats-btn">üìä Xem Th·ªëng K√™</button>
                    <button id="export-data-btn">üì• Xu·∫•t d·ªØ li·ªáu</button>
                    <button id="import-data-btn">üì§ Nh·∫≠p d·ªØ li·ªáu</button>
                    <input type="file" id="import-file-input" class="hidden" accept=".json">
                </div>
                 <div id="usage-tracker">
                    Th·ªùi gian s·ª≠ d·ª•ng h√¥m nay: <span id="usage-time">0 ph√∫t</span>
                </div>
            </div>

            <div id="flashcard-view" class="hidden">
                <div id="flashcard-container" class="card">
                    <div class="card-actions-top">
                        <button id="star-card-btn" title="G·∫Øn d·∫•u sao (S)" aria-label="ƒê√°nh d·∫•u th·∫ª quan tr·ªçng">‚≠êÔ∏è</button>
                        <button id="edit-card-btn" title="S·ª≠a th·∫ª n√†y" aria-label="Ch·ªânh s·ª≠a th·∫ª">‚úèÔ∏è</button>
                        <button id="delete-card-btn" title="X√≥a th·∫ª n√†y" aria-label="X√≥a th·∫ª">&times;</button>
                    </div>
                    <div class="card-inner">
                        <div class="card-front"><p id="card-front-content"></p></div>
                        <div class="card-back"><p id="card-back-content"></p></div>
                    </div>
                </div>
                <div id="undo-container" class="hidden">
                    <button id="undo-btn">‚Ü©Ô∏è Ho√†n t√°c (Ctrl+Z)</button>
                </div>
                <div id="navigation-buttons">
                    <button id="forgot-btn" class="nav-btn">‚¨ÖÔ∏è ƒêang h·ªçc</button>
                    <button id="known-btn" class="nav-btn">Th√†nh th·∫°o ‚û°Ô∏è</button>
                </div>
                <div id="instructions">
                    <p><b>D·∫•u c√°ch:</b> L·∫≠t th·∫ª | <b>M≈©i t√™n tr√°i/ph·∫£i:</b> ƒê√°nh gi√°</p>
                </div>
            </div>
            
            <div id="deck-completion-message" class="hidden">
                <h2>üéâ Ho√†n th√†nh!</h2>
                <p>B·∫°n ƒë√£ √¥n t·∫≠p h·∫øt c√°c th·∫ª trong phi√™n n√†y.</p>
                <button id="back-to-progress-btn">Quay v·ªÅ trang ch√≠nh</button>
            </div>

             <div id="stats-view" class="hidden">
                <h2>Th·ªëng K√™ Chi Ti·∫øt</h2>
                <p>Bi·ªÉu ƒë·ªì ti·∫øn ƒë·ªô h·ªçc t·∫≠p c·ªßa b·∫°n theo th·ªùi gian.</p>
                <div class="chart-container">
                    <canvas id="stats-chart"></canvas>
                </div>
                <button id="back-to-progress-from-stats-btn">Quay v·ªÅ trang ch√≠nh</button>
            </div>
        </main>
    </div>

    <div id="modal-container" class="modal-container hidden">
        <div class="modal-content">
            <span id="close-modal-btn" class="close-button">&times;</span>
            <h2 id="modal-title"></h2>
            <div id="modal-deck-name-section">
                <input type="text" id="modal-deck-name-input" placeholder="T√™n b·ªô th·∫ª">
            </div>
            <div id="modal-card-data-section">
                 <label for="excel-file-input" class="excel-label">Ho·∫∑c t·∫£i l√™n t·ª´ file Excel:</label>
                 <input type="file" id="excel-file-input" accept=".xlsx, .xls">
                 <textarea id="modal-card-data-input" rows="10" placeholder="M·∫∑t tr∆∞·ªõc - M·∫∑t sau"></textarea>
            </div>
            <button id="modal-save-btn">L∆∞u</button>
        </div>
    </div>

    <div id="merge-modal-container" class="modal-container hidden">
        <div class="modal-content">
            <span id="close-merge-modal-btn" class="close-button">&times;</span>
            <h2>T·∫°o Nh√≥m Th·∫ª G·ªôp</h2>
            <div id="modal-group-name-section">
                <input type="text" id="modal-group-name-input" placeholder="ƒê·∫∑t t√™n cho nh√≥m m·ªõi">
            </div>
            <div id="merge-deck-list-section">
                <p>Ch·ªçn √≠t nh·∫•t 2 b·ªô th·∫ª ƒë·ªÉ g·ªôp:</p>
                <div id="merge-deck-list"></div>
            </div>
            <button id="modal-save-group-btn">L∆∞u Nh√≥m</button>
        </div>
    </div>

    <div id="manage-cards-modal" class="modal-container hidden">
        <div class="modal-content">
            <span class="close-button" data-close-modal="manage-cards-modal">&times;</span>
            <h2>Qu·∫£n l√Ω th·∫ª: <span id="manage-cards-deck-name"></span></h2>
            <div id="card-list-container"></div>
            <div class="modal-actions">
                <button id="delete-selected-cards-btn" class="danger">X√≥a c√°c th·∫ª ƒë√£ ch·ªçn</button>
            </div>
        </div>
    </div>

    <div id="confirm-modal" class="modal-container hidden">
        <div class="modal-content">
            <h2 id="confirm-modal-title">X√°c nh·∫≠n</h2>
            <p id="confirm-modal-text"></p>
            <div class="modal-actions">
                <button id="confirm-modal-cancel-btn" class="secondary-action-btn">H·ªßy</button>
                <button id="confirm-modal-ok-btn" class="danger">ƒê·ªìng √Ω</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>